<html>
  <head>
    <title>Meander Maker</title>
    <!--both brython.js and brython_stdlib.js files live in the static/ dir-->
    <script type="text/javascript" src="brython.js"></script>
    <script type="text/javascript" src="brython_stdlib.js"></script>
  </head>
  <!--adding custom style tag called yellow-->
  <style>
    div.yellow {
      background-color: yellow
    }
  </style>
  <body id="page-top" onload="brython(1)">
    <h1>User Input</h1>
    <script type="text/python3">
      from browser import document, ajax
      import json
      import warnings
      def show_results(response):
          if response.status==200 or response.status==0:
              document["result"].html = response.content
          else:
              warnings.warn(response.text)
      def get_output(ev):
          req = ajax.ajax()
          req.bind("complete", show_results)
          req.open("POST", "/output", True)
          req.set_header("content-type","application/json")
          data = json.dumps({"loc": document["user_input_loc"].value,
                             "topic": document["user_input_topic"].value,
                             "mode": document["user_input_mode"].value
                             })
          req.send(data)
      document["click_button"].bind("click", get_output)
    </script>
    <textarea id="user_input_loc">Hôtel Ampère Paris</textarea>
    <textarea id="user_input_topic">wine tasting</textarea>
    <select id="user_input_mode">
      <option value="walking">Walking</option>
      <option value="driving">Driving</option>
      <option value="bicycling">Bicycle</option>
      <option value="transit">Public Transit</option>
    </select>
    <button id="click_button">Compute! (may take several seconds)</button>
    <br />
    <h1>User Output</h1>
    <!--try replacing yellow with div to remove the yellow styling-->
    <div class="yellow" id="result"></div>
  </body>
</html>
